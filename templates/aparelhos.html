{% extends "base.html" %}
{% block conteudo %}

<h2>Gerenciar Aparelhos</h2>

<form id="form-aparelho" class="form-box">

    <label>Nome do Aparelho</label>
    <input name="nome_aparelho" required>

    <label>IMEI</label>
    <input name="imei" required>

    <label>Modelo</label>
    <input name="modelo" required>

    <label>Status</label>
    <select name="status_aparelho">
        <option>ATIVO</option>
        <option>MANUTENÇÃO</option>
        <option>INATIVO</option>
    </select>

    <button type="submit">Cadastrar</button>
</form>

<h2>Aparelhos Cadastrados</h2>

<table class="tabela">
    <thead>
        <tr>
            <th>Nome</th>
            <th>IMEI</th>
            <th>Modelo</th>
            <th>Status</th>
        </tr>
    </thead>
    <tbody>
    {% for a in aparelhos %}
    <tr>
        <td>{{ a.nome_aparelho }}</td>
        <td>{{ a.imei }}</td>
        <td>{{ a.modelo }}</td>
        <td>{{ a.status_aparelho }}</td>
    </tr>
    {% endfor %}
    </tbody>
</table>

<script>
document.querySelector("#form-aparelho").onsubmit = async e => {
    e.preventDefault();
    const data = Object.fromEntries(new FormData(e.target));
    await fetch("/aparelhos/add", {method:"POST", body: new URLSearchParams(data)});
    location.reload();
}
</script>

{% endblock %}
